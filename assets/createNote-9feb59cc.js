import{j as t,W as I,l as k,r,u as w,N as b,X as p,Y as h,n as u,Z as y,$ as E}from"./index-8272c96d.js";import{r as P,i as T}from"./createSvgIcon-58188a5d.js";import{B as _}from"./Button-6fe96076.js";import{F as q}from"./message-3cd5b343.js";import{T as v}from"./TextField-a1f23333.js";import"./Paper-5b96336f.js";var m={},B=T;Object.defineProperty(m,"__esModule",{value:!0});var M=m.default=void 0,S=B(P()),R=t,z=(0,S.default)((0,R.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");M=m.default=z;function O(){const{recordId:l}=I(),a=k(),d=l==="create",i=parseInt(l),[s,c]=r.useState(null),[o,f]=r.useState(null),n=w(),j=async()=>{if(s&&o){if(d)await y({title:s,content:o,created_at:new Date});else{const e=await p(i);await E({...e,title:s,content:o})}g()}s===null&&c(""),o===null&&f("")},g=r.useCallback(()=>{r.startTransition(()=>{a(b)})},[a]),x=r.useCallback(async()=>{const e=await p(i);e||a(h);const{title:C,content:N}=e;c(C),f(N)},[a,i]);return r.useEffect(()=>{const e=l===`${i}`;!e&&!d&&a(h),e&&x()},[x,d,a,i,l]),t.jsxs(u,{sx:{padding:"1rem 1rem 0"},children:[t.jsxs(u,{sx:{display:"flex",alignItems:"center",position:"sticky",top:0,zIndex:2,backgroundColor:"#fff"},children:[t.jsx(_,{onClick:g,children:t.jsx(M,{})}),t.jsx(u,{sx:{flex:"1 1 0"},children:d?n.formatMessage({defaultMessage:"Create note",id:"create_note"}):n.formatMessage({defaultMessage:"Edit note",id:"edit_note"})}),t.jsx(_,{onClick:j,variant:"contained",size:"small",children:t.jsx(q,{defaultMessage:"Add",id:"add"})})]}),t.jsxs(u,{children:[t.jsx(v,{autoComplete:"off",required:!0,margin:"dense",id:"title",label:n.formatMessage({defaultMessage:"title",id:"add_note_title"}),error:s==="",helperText:n.formatMessage({defaultMessage:"Please enter the title of the note",id:"add_note_title_helper"}),type:"text",value:s??"",onChange:e=>c(e.target.value),fullWidth:!0,variant:"standard"}),t.jsx(v,{required:!0,autoComplete:"off",margin:"dense",id:"content",label:n.formatMessage({defaultMessage:"content",id:"add_note_content"}),error:o==="",helperText:n.formatMessage({defaultMessage:"Please enter the content of the note",id:"add_note_content_helper"}),type:"text",value:o??"",onChange:e=>f(e.target.value),fullWidth:!0,multiline:!0,variant:"standard"})]})]})}export{O as default};
