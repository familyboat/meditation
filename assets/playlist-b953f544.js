import{x as l,z as f,A as g,C as h,D as k,E as S}from"./index-c5e3b550.js";const _={loop:{en:"loop",zh:"循环播放"},single:{en:"single",zh:"单曲循环"},random:{en:"random",zh:"随机播放"}},i=l([]),d=l(!1),r=l(null),m=l("loop");function p(n){const e=i.value.length;if(e===0)throw Error("No notes to speak!");const s=m.value,o=r.value,c=n==="next"?1:-1;let t;switch(s){case"loop":{t=o===null?0:o+1*c,t>=e&&(t=0),t<0&&(t=e-1);break}case"single":t=o||0;break;case"random":t=Math.floor(Math.random()*e);break}r.value=t}const v=S();function x(n){const a=f.value.substring(0,2),e=g({locale:a,messages:a==="en"?h:k},v),{title:s,content:o,created_at:c,modified_at:t}=n;return`${e.formatMessage({defaultMessage:"The title is",id:"speak_one_part"})} ${s} ${e.formatMessage({defaultMessage:"; The content is",id:"speak_two_part"})} ${o} ${e.formatMessage({defaultMessage:"; This note created at",id:"speak_three_part"})} ${c.toLocaleString()} ${e.formatMessage({defaultMessage:"; The last modified time is",id:"speak_four_part"})} ${t.toLocaleString()}`}function u(){speechSynthesis.cancel();const n=i.value;if(n.length===0)return;const a=r.value;if(a===null)return;const e=n[a],s=new SpeechSynthesisUtterance(x(e));speechSynthesis.speak(s),s.addEventListener("start",()=>{d.value=!0}),s.addEventListener("end",()=>{M()})}function $(){p("next"),u()}function I(){speechSynthesis.cancel(),d.value=!1}function N(){p("previous"),u()}function M(){p("next"),u()}function b(n){const a=i.value;a.push(n),i.value=a}export{b as a,$ as b,N as c,m as d,_ as e,x as f,d as i,M as n,i as p,I as s};
